<!DOCTYPE HTML>
<html>
<head>
<title>Jenkins Plugin Management in Groovy - Allan Espinosa</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1,
      maximum-scale=1">
<link rel="stylesheet" type="text/css" href="../css/main.css" />
</head>
<body>

<header>
  <h1> Allan Espinosa </h1>
</header>
<nav>
  <ul>
    <li><a href="../">Home</a></li>
    <li><a href="../blog/">Blog</a></li>
    <li><a href="../presentations.html">Publications</a></li>
    <li><a href="../contact.html">Contact</a></li>
  </ul>
</nav>
<main>
<article class="post">
  <h1>Jenkins Plugin Management in Groovy</h1>
  <p>2014 October 17</p>

  <section>
    <p>In conjuction with Habit#4 (Tend your Plugin Garden) in [1] . I want to just have the plugins I want on my Jenkins deployment. For my use case, I don’t want to have vanilla deployed plugins like the CVS plugin. Here is a way to disable all plugins at the start.</p>
<pre><code>plugins = Jenkins.instance.pluginManager.plugins
plugins.each {
  it.disable()
}</code></pre>
<h2 id="plugin-installation">Plugin Installation</h2>
<p>Instead of having your outer config management download the .hpi/ .jpi and wrangle with dependencies yourself, you can take advantage of Jenkin’s builtin Java calls to do exactly the same thing. With this, you can install a plugin from the script console.</p>
<pre><code>Jenkins.instance.updateCenter.getPlugin(&quot;git&quot;).deploy()</code></pre>
<h2 id="enable-a-plugins-dependencies">Enable a plugin’s dependencies</h2>
<p>In the previous section, some of the dependencies will be disabled even though they got updated to the version required by the Git plugin because of the first step we did to disable all plugins. Here, we get all the plugin’s dependencies, and sub dependencies to enable all of them.</p>
<pre><code>git = pm.getPlugin(&quot;git&quot;)

def deployPlugin(plugin) {
  if (! plugin.isEnabled() ) {
    plugin.enable()
  }
  plugin.getDependencies().each { 
    deployPlugin(pm.getPlugin(it.shortName)) 
  }
}

deployPlugin(git)</code></pre>
<p>[1] <a href="http://www.slideshare.net/andrewbayer/seven-habits-of-highly-effective-jenkins-users-2014-edition" class="uri">http://www.slideshare.net/andrewbayer/seven-habits-of-highly-effective-jenkins-users-2014-edition</a></p>
  </section>
</article>

</main>

<div id="others">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Sidebar -->
  <ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-8408299806266445" data-ad-slot="7051680217"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

<footer>
  Last updated 2021 February 11
</footer>

</body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
     Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58996975-1', 'auto');
    ga('send', 'pageview');

</script>

</html>

<!-- vim:set sts=4 -->
